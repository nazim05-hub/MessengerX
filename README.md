# MessengerX

# ๐ฌ PWA Messenger

ะกะพะฒัะตะผะตะฝะฝัะน, ะฟะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน PWA-ะผะตััะตะฝะดะถะตั ั ะฟะพะดะดะตัะถะบะพะน WebRTC ะดะปั ะฐัะดะธะพ/ะฒะธะดะตะพ ะทะฒะพะฝะบะพะฒ.

## โจ ะะพะทะผะพะถะฝะพััะธ

### ๐ ะััะตะฝัะธัะธะบะฐัะธั
- ะะตะณะธัััะฐัะธั ะฟะพ email
- ะะพะดัะฒะตัะถะดะตะฝะธะต email
- JWT ะฐะฒัะพัะธะทะฐัะธั
- Refresh ัะพะบะตะฝั
- ะััะพะด ะธะท ัะธััะตะผั

### ๐ฌ ะงะฐัั
- ะะธัะฝัะต ะธ ะณััะฟะฟะพะฒัะต ัะฐัั
- ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ (WebSocket)
- ะกัะฐัััั ะพะฝะปะฐะนะฝ/ะพััะปะฐะนะฝ
- ะะฝะดะธะบะฐัะพั ะฝะฐะฑะพัะฐ ัะตะบััะฐ
- ะัะฟัะฐะฒะบะฐ ัะตะบััะฐ, ะธะทะพะฑัะฐะถะตะฝะธะน, ะฒะธะดะตะพ, ะดะพะบัะผะตะฝัะพะฒ
- ะัะธะบัะตะฟะปะตะฝะธะต ัะฐะนะปะพะฒ
- ะะตะฐะบัะธะธ ะฝะฐ ัะพะพะฑัะตะฝะธั
- ะัะผะตัะบะฐ "ะฟัะพัะธัะฐะฝะพ"
- ะฃะดะฐะปะตะฝะธะต ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน
- Push-ัะฒะตะดะพะผะปะตะฝะธั

### ๐ค ะัะพัะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั
- ะคะพัะพ ะฟัะพัะธะปั
- ะกัะฐััั
- ะะธะบะฝะตะนะผ
- ะะพะผะตั ัะตะปะตัะพะฝะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
- ะะฐัััะพะนะบะธ ะฟัะธะฒะฐัะฝะพััะธ

### ๐ ะัะดะธะพ/ะะธะดะตะพ ะะฒะพะฝะบะธ (WebRTC)
- ะกะพะทะดะฐะฝะธะต ะทะฒะพะฝะบะฐ
- ะัะฒะตั ะฝะฐ ะทะฒะพะฝะพะบ
- ะัะบะปะพะฝะตะฝะธะต ะทะฒะพะฝะบะฐ
- ะะตัะตะบะปััะตะฝะธะต ะบะฐะผะตัั
- ะัะบะปััะตะฝะธะต ะผะธะบัะพัะพะฝะฐ/ะบะฐะผะตัั
- ะะตะผะพะฝัััะฐัะธั ัะบัะฐะฝะฐ
- ะััะฟะฟะพะฒัะต ะทะฒะพะฝะบะธ
- STUN/TURN ะฟะพะดะดะตัะถะบะฐ

### ๐ฑ PWA
- ะัะปะฐะนะฝ ะฟะพะดะดะตัะถะบะฐ (IndexedDB + Service Worker)
- Push-ัะฒะตะดะพะผะปะตะฝะธั
- ะฃััะฐะฝะพะฒะบะฐ ะฝะฐ ัะตะปะตัะพะฝ
- ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ
- ะขัะผะฝะฐั/ัะฒะตัะปะฐั ัะตะผะฐ

## ๐ ะขะตัะฝะพะปะพะณะธะธ

### Frontend
- **React** - UI ะฑะธะฑะปะธะพัะตะบะฐ
- **Vite** - ะัััััะน ัะฑะพััะธะบ
- **TypeScript** - ะขะธะฟะธะทะฐัะธั
- **Mantine UI** - ะะพะผะฟะพะฝะตะฝัั ะธ ััะธะปะธ
- **Zustand** - ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ
- **React Query** - ะััะธัะพะฒะฐะฝะธะต ะธ ัะธะฝััะพะฝะธะทะฐัะธั ะดะฐะฝะฝัั
- **WebSocket** - ะะตะฐะปัะฝะพะต ะฒัะตะผั
- **WebRTC** - ะัะดะธะพ/ะฒะธะดะตะพ ะทะฒะพะฝะบะธ
- **IndexedDB** - ะัะปะฐะนะฝ ััะฐะฝะธะปะธัะต
- **Service Worker** - PWA ััะฝะบัะธะพะฝะฐะปัะฝะพััั

### Backend
- **Python** - ะฏะทัะบ ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั
- **FastAPI** - ะะตะฑ-ััะตะนะผะฒะพัะบ
- **PostgreSQL** - ะัะฝะพะฒะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั
- **SQLAlchemy** - ORM
- **Redis** - ะัั ะธ ะพะฝะปะฐะนะฝ-ััะฐัััั
- **WebSockets** - ะะตะฐะปัะฝะพะต ะฒัะตะผั
- **JWT** - ะะฒัะพัะธะทะฐัะธั
- **Uvicorn** - ASGI ัะตัะฒะตั

### ะะฝััะฐััััะบัััะฐ
- **Docker** - ะะพะฝัะตะนะฝะตัะธะทะฐัะธั
- **Docker Compose** - ะัะบะตัััะฐัะธั
- **Coturn** - TURN/STUN ัะตัะฒะตั ะดะปั WebRTC
- **Caddy** - Reverse proxy ะธ SSL

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั
- Docker ะธ Docker Compose
- Node.js 20+ (ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ)
- Python 3.11+ (ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ)

### ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

#### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
```bash
git clone https://github.com/nazim05-hub/MessengerX.git
cd mes
```

#### 2. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

##### Backend
ะกะบะพะฟะธััะนัะต `.env.example` ะฒ `.env` ะธ ะฝะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต:
```bash
cd backend
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป
```

ะะฐะถะฝัะต ะฟะตัะตะผะตะฝะฝัะต:
```env
DATABASE_URL=postgresql://messenger:messenger_password@postgres:5432/messenger
REDIS_URL=redis://redis:6379
SECRET_KEY=your-super-secret-key-change-in-production
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
```

##### Frontend
ะกะพะทะดะฐะนัะต `.env` ัะฐะนะป ะฒ ะฟะฐะฟะบะต `frontend`:
```bash
cd frontend
cat > .env << EOL
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
EOL
```

##### Coturn
ะััะตะดะฐะบัะธััะนัะต `coturn/turnserver.conf` ะธ ะทะฐะผะตะฝะธัะต:
```
external-ip=YOUR_PUBLIC_IP
```
ะฝะฐ ะฒะฐั ะฟัะฑะปะธัะฝัะน IP ะฐะดัะตั.

#### 3. ะะฐะฟััะบ ั Docker Compose

```bash
# ะะท ะบะพัะฝะตะฒะพะน ะดะธัะตะบัะพัะธะธ ะฟัะพะตะบัะฐ
docker-compose up -d
```

ะญัะพ ะทะฐะฟัััะธั ะฒัะต ัะตัะฒะธัั:
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:8000
- **PostgreSQL**: localhost:5432
- **Redis**: localhost:6379
- **Coturn**: UDP 3478, 5349

#### 4. ะัะพะฒะตัะบะฐ ัะฐะฑะพัั

ะัะบัะพะนัะต ะฑัะฐัะทะตั ะธ ะฟะตัะตะนะดะธัะต ะฟะพ ะฐะดัะตัั:
```
http://localhost:3000
```

## ๐ง ะะฐะทัะฐะฑะพัะบะฐ

### ะะฐะฟััะบ Backend ะปะพะบะฐะปัะฝะพ

```bash
cd backend

# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ะธะปะธ
venv\Scripts\activate  # Windows

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt

# ะะฐะฟััะบ ัะตัะฒะตัะฐ
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### ะะฐะฟััะบ Frontend ะปะพะบะฐะปัะฝะพ

```bash
cd frontend

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะะฐะฟััะบ dev ัะตัะฒะตัะฐ
npm run dev
```

Frontend ะฑัะดะตั ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั: http://localhost:3000

### ะะธะณัะฐัะธะธ ะฑะฐะทั ะดะฐะฝะฝัั

```bash
cd backend

# ะกะพะทะดะฐะฝะธะต ะผะธะณัะฐัะธะธ
alembic revision --autogenerate -m "Description"

# ะัะธะผะตะฝะตะฝะธะต ะผะธะณัะฐัะธะน
alembic upgrade head
```

## ๐ฆ ะัะพะดะฐะบัะฝ

### ะะพะดะณะพัะพะฒะบะฐ ะบ ะฟัะพะดะฐะบัะตะฝั

1. **ะะฐัััะพะนัะต ะดะพะผะตะฝั ะฒ Caddyfile**:
```
yourdomain.com {
    reverse_proxy frontend:3000
}

api.yourdomain.com {
    reverse_proxy backend:8000
}
```

2. **ะะฑะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั**:
```env
# Backend .env
SECRET_KEY=<ัะณะตะฝะตัะธััะนัะต ะฝะฐะดัะถะฝัะน ะบะปัั>
FRONTEND_URL=https://yourdomain.com

# Frontend .env
VITE_API_URL=https://api.yourdomain.com
VITE_WS_URL=wss://api.yourdomain.com
```

3. **ะะฐัััะพะนัะต Coturn** ั ะฒะฐัะธะผ ะฟัะฑะปะธัะฝัะผ IP

4. **ะกะพะฑะตัะธัะต ะฟัะพะดะฐะบัะฝ ะพะฑัะฐะทั**:
```bash
docker-compose -f docker-compose.prod.yml up -d --build
```

### SSL ัะตััะธัะธะบะฐัั

Caddy ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะปััะธั SSL ัะตััะธัะธะบะฐัั ะพั Let's Encrypt ะฟัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ ะดะพะผะตะฝะฝัั ะธะผัะฝ.

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### Backend
```bash
cd backend
pytest
```

### Frontend
```bash
cd frontend
npm run test
```

## ๐ฑ ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะฐะบ PWA

### ะะฐ ะผะพะฑะธะปัะฝัั ััััะพะนััะฒะฐั

1. ะัะบัะพะนัะต ะฟัะธะปะพะถะตะฝะธะต ะฒ ะฑัะฐัะทะตัะต
2. ะ ะผะตะฝั ะฑัะฐัะทะตัะฐ ะฒัะฑะตัะธัะต "ะะพะฑะฐะฒะธัั ะฝะฐ ะณะปะฐะฒะฝัะน ัะบัะฐะฝ"
3. ะัะธะปะพะถะตะฝะธะต ัััะฐะฝะพะฒะธััั ะบะฐะบ PWA

### Push-ัะฒะตะดะพะผะปะตะฝะธั

ะัะธะปะพะถะตะฝะธะต ะทะฐะฟัะพัะธั ัะฐะทัะตัะตะฝะธะต ะฝะฐ ะพัะฟัะฐะฒะบั ัะฒะตะดะพะผะปะตะฝะธะน ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต.

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
mes/
โโโ backend/                 # Backend ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ routers/            # API endpoints
โ   โโโ models.py           # SQLAlchemy ะผะพะดะตะปะธ
โ   โโโ schemas.py          # Pydantic ััะตะผั
โ   โโโ auth.py             # ะััะตะฝัะธัะธะบะฐัะธั
โ   โโโ database.py         # ะะฐะทะฐ ะดะฐะฝะฝัั
โ   โโโ websocket_manager.py # WebSocket ะผะตะฝะตะดะถะตั
โ   โโโ main.py             # ะะปะฐะฒะฝัะน ัะฐะนะป FastAPI
โ   โโโ requirements.txt    # Python ะทะฐะฒะธัะธะผะพััะธ
โ   โโโ Dockerfile          # Docker ะพะฑัะฐะท
โโโ frontend/               # Frontend ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ src/
โ   โ   โโโ components/    # React ะบะพะผะฟะพะฝะตะฝัั
โ   โ   โโโ pages/         # ะกััะฐะฝะธัั
โ   โ   โโโ stores/        # Zustand stores
โ   โ   โโโ services/      # API ะธ ัะตัะฒะธัั
โ   โ   โโโ types/         # TypeScript ัะธะฟั
โ   โ   โโโ config/        # ะะพะฝัะธะณััะฐัะธั
โ   โ   โโโ App.tsx        # ะะปะฐะฒะฝัะน ะบะพะผะฟะพะฝะตะฝั
โ   โ   โโโ main.tsx       # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ public/            # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั
โ   โโโ package.json       # Node ะทะฐะฒะธัะธะผะพััะธ
โ   โโโ vite.config.ts     # Vite ะบะพะฝัะธะณััะฐัะธั
โ   โโโ Dockerfile         # Docker ะพะฑัะฐะท
โโโ coturn/                # Coturn ะบะพะฝัะธะณััะฐัะธั
โ   โโโ turnserver.conf
โโโ docker-compose.yml     # Docker Compose ัะฐะนะป
โโโ Caddyfile             # Caddy ะบะพะฝัะธะณััะฐัะธั
โโโ README.md             # ะะพะบัะผะตะฝัะฐัะธั
```

## ๐ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### WebSocket ะฝะต ะฟะพะดะบะปััะฐะตััั
- ะัะพะฒะตัััะต, ััะพ backend ะทะฐะฟััะตะฝ
- ะฃะฑะตะดะธัะตัั, ััะพ ัะพะบะตะฝ ะฒะฐะปะธะดะตะฝ
- ะัะพะฒะตัััะต CORS ะฝะฐัััะพะนะบะธ

### WebRTC ะฝะต ัะฐะฑะพัะฐะตั
- ะะฐัััะพะนัะต TURN ัะตัะฒะตั ั ะฒะฐัะธะผ ะฟัะฑะปะธัะฝัะผ IP
- ะฃะฑะตะดะธัะตัั, ััะพ ะฟะพััั 3478 ะธ 5349 ะพัะบัััั
- ะัะพะฒะตัััะต, ััะพ ะฑัะฐัะทะตั ะธะผะตะตั ะดะพัััะฟ ะบ ะบะฐะผะตัะต/ะผะธะบัะพัะพะฝั

### ะะฐะทะฐ ะดะฐะฝะฝัั ะฝะต ะฟะพะดะบะปััะฐะตััั
- ะัะพะฒะตัััะต, ััะพ PostgreSQL ะบะพะฝัะตะนะฝะตั ะทะฐะฟััะตะฝ
- ะฃะฑะตะดะธัะตัั, ััะพ DATABASE_URL ะฟัะฐะฒะธะปัะฝัะน

## ๐ ะะธัะตะฝะทะธั

MIT

## ๐ฅ ะะฒัะพั

ะกะพะทะดะฐะฝะพ ั โค๏ธ ะดะปั ัะพะฒัะตะผะตะฝะฝัั ะบะพะผะผัะฝะธะบะฐัะธะน

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- **FastAPI** - ะทะฐ ะพัะปะธัะฝัะน ะฒะตะฑ-ััะตะนะผะฒะพัะบ
- **Mantine** - ะทะฐ ะบัะฐัะธะฒัะต ะบะพะผะฟะพะฝะตะฝัั
- **React** - ะทะฐ ะผะพัะฝัั UI ะฑะธะฑะปะธะพัะตะบั
- **Docker** - ะทะฐ ะฟัะพััะพัั ัะฐะทะฒััััะฒะฐะฝะธั


